{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport config from 'next/config';\nimport Cookie from 'js-cookie';\nvar API_URL = config().publicRuntimeConfig.API_URL;\n\nvar DatasourceActions = /*#__PURE__*/function () {\n  function DatasourceActions() {\n    _classCallCheck(this, DatasourceActions);\n  }\n\n  _createClass(DatasourceActions, null, [{\n    key: \"createDatasource\",\n    value: function createDatasource(data) {\n      return _regeneratorRuntime.async(function createDatasource$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", axios.post(\"\".concat(API_URL, \"/DataSources\"), data, {\n                headers: {\n                  Authorization: Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"updateDatasource\",\n    value: function updateDatasource(id, data) {\n      return _regeneratorRuntime.async(function updateDatasource$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", axios.patch(\"\".concat(API_URL, \"/DataSources/\").concat(id), data, {\n                headers: {\n                  Authorization: Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getDatasources\",\n    value: function getDatasources(_ref) {\n      var Authorization, query;\n      return _regeneratorRuntime.async(function getDatasources$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              Authorization = _ref.Authorization, query = _ref.query;\n              return _context3.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"/DataSources\"), {\n                headers: {\n                  Authorization: Authorization || Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err;\n              }));\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getUserDatasources\",\n    value: function getUserDatasources(id, query) {\n      return _regeneratorRuntime.async(function getUserDatasources$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              return _context4.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"/users/\").concat(id, \"/dataSrouces\"), {\n                headers: {\n                  Authorization: Cookie.get('id')\n                },\n                params: _objectSpread({}, query)\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getDatasourceById\",\n    value: function getDatasourceById(id) {\n      return _regeneratorRuntime.async(function getDatasourceById$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              return _context5.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"/DataSources/\").concat(id), {\n                headers: {\n                  Authorization: Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"removeDatasource\",\n    value: function removeDatasource(id) {\n      return _regeneratorRuntime.async(function removeDatasource$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              return _context6.abrupt(\"return\", axios[\"delete\"](\"\".concat(API_URL, \"/DataSources/\").concat(id), {\n                headers: {\n                  Authorization: Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getDocList\",\n    value: function getDocList(id) {\n      return _regeneratorRuntime.async(function getDocList$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              return _context7.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"/DataSources/\").concat(id, \"/doc-list\"), {\n                headers: {\n                  Authorization: Cookie.get('id')\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getFieldList\",\n    value: function getFieldList(id, docId) {\n      return _regeneratorRuntime.async(function getFieldList$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              return _context8.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"/DataSources/\").concat(id, \"/field-list\"), {\n                headers: {\n                  Authorization: Cookie.get('id')\n                },\n                params: {\n                  docId: docId\n                }\n              }).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"queryDatasource\",\n    value: function queryDatasource(query) {\n      return _regeneratorRuntime.async(function queryDatasource$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              return _context9.abrupt(\"return\", axios.post('', {}).then(function (res) {\n                return res.data;\n              })[\"catch\"](function (err) {\n                return err.response;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  return DatasourceActions;\n}();\n\nexport { DatasourceActions as default };","map":{"version":3,"sources":["/Users/imustafa/Projects/LoStudio/client/actions/datasource.actions.ts"],"names":["axios","config","Cookie","API_URL","publicRuntimeConfig","DatasourceActions","data","post","headers","Authorization","get","then","res","err","id","patch","response","query","params","docId"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport config from 'next/config'\nimport Cookie from 'js-cookie'\nimport Datasource from '../types/datasource.types'\n\nconst { API_URL } = config().publicRuntimeConfig\n\nexport default class DatasourceActions {\n\n  public static async createDatasource(data: Datasource): Promise<Datasource> {\n    return axios\n      .post(`${API_URL}/DataSources`, data, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err)\n  }\n\n  public static async updateDatasource(id: string, data: Datasource): Promise<Datasource> {\n    return axios\n      .patch(`${API_URL}/DataSources/${id}`, data, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDatasources({ Authorization, query }: { Authorization?: string, query?: any }): Promise<Array<Datasource>> {\n    return axios\n      .get(`${API_URL}/DataSources`, { headers: { Authorization: Authorization || Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err)\n  }\n\n  public static async getUserDatasources(id: string, query: any): Promise<Array<Datasource>> {\n    return axios\n      .get(`${API_URL}/users/${id}/dataSrouces`, { headers: { Authorization: Cookie.get('id') }, params: { ...query } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDatasourceById(id: string): Promise<Datasource> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async removeDatasource(id: string): Promise<Datasource> {\n    return axios\n      .delete(`${API_URL}/DataSources/${id}`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDocList(id: string): Promise<any> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}/doc-list`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getFieldList(id: string, docId: string): Promise<any> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}/field-list`, { headers: { Authorization: Cookie.get('id') }, params: { docId } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async queryDatasource(query: string): Promise<any> {\n    return axios\n      .post('', {})\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}