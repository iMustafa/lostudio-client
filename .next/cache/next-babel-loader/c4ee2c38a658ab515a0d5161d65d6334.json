{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/imustafa/Projects/LoStudio/client/components/ApplicationMainBar.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Badge from \"@material-ui/core/Badge\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MailIcon from \"@material-ui/icons/Mail\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport SideMenu from \"./SideMenu\";\nimport NotificationsActions from \"../actions/notifications.actions\";\nimport NotificationsMenu from \"./notifications/NotificationsMenu\";\nimport Cookie from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { deleteCookie } from \"../actions/auth.actions\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    grow: {\n      flexGrow: 1\n    },\n    menuButton: {\n      marginRight: theme.spacing(2)\n    },\n    title: _defineProperty({\n      display: \"none\"\n    }, theme.breakpoints.up(\"sm\"), {\n      display: \"block\"\n    }),\n    search: _defineProperty({\n      position: \"relative\",\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: \"100%\"\n    }, theme.breakpoints.up(\"sm\"), {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }),\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\"\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\"\n    }, theme.breakpoints.up(\"md\"), {\n      width: 200\n    }),\n    sectionDesktop: _defineProperty({\n      display: \"none\"\n    }, theme.breakpoints.up(\"md\"), {\n      display: \"flex\"\n    }),\n    sectionMobile: _defineProperty({\n      display: \"flex\"\n    }, theme.breakpoints.up(\"md\"), {\n      display: \"none\"\n    })\n  };\n});\nexport default function PrimarySearchAppBar() {\n  var classes = useStyles();\n  var router = useRouter();\n\n  var _useState = useState(0),\n      notificationsCount = _useState[0],\n      setNotificationsCount = _useState[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      notificationsMenuState = _React$useState2[0],\n      setNotificationsMenuState = _React$useState2[1];\n\n  var openNotificationsMenu = function openNotificationsMenu(event) {\n    setNotificationsMenuState(event.currentTarget);\n  };\n\n  var closeNotificationsMenu = function closeNotificationsMenu() {\n    setNotificationsMenuState(null);\n  };\n\n  var _useState2 = useState(!!Cookie.get(\"id\")),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var handleMenuClose = function handleMenuClose() {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  var logout = function logout() {\n    deleteCookie();\n    handleMenuClose();\n    location.reload();\n  };\n\n  useEffect(function () {\n    var getNotificationsCount = function getNotificationsCount() {\n      var $notificationsCount;\n      return _regeneratorRuntime.async(function getNotificationsCount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(NotificationsActions.getMyNotificationsCount({}));\n\n            case 3:\n              $notificationsCount = _context.sent;\n              setNotificationsCount($notificationsCount.count);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    getNotificationsCount();\n  }, []);\n  return __jsx(\"div\", {\n    className: classes.grow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, __jsx(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, __jsx(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    className: classes.title,\n    variant: \"h6\",\n    noWrap: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"LoStudio\"), isAuthenticated && __jsx(\"div\", {\n    className: classes.grow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/dashboards\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"Dashboards\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/webpages\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, \"Web Pages\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/datasources\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Data Sources\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/widgets\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \"Widgets\")), __jsx(\"div\", {\n    className: classes.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: classes.searchIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  })), __jsx(InputBase, {\n    placeholder: \"Search\\u2026\",\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    },\n    inputProps: {\n      \"aria-label\": \"search\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: classes.sectionDesktop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, __jsx(IconButton, {\n    color: \"inherit\",\n    onClick: openNotificationsMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, notificationsCount ? __jsx(Badge, {\n    badgeContent: notificationsCount,\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, __jsx(NotificationsIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  })) : __jsx(NotificationsIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  })), __jsx(NotificationsMenu, {\n    anchorEl: notificationsMenuState,\n    keepMounted: true,\n    style: {\n      top: 50\n    },\n    open: Boolean(notificationsMenuState),\n    onClose: closeNotificationsMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }), __jsx(IconButton, {\n    edge: \"end\",\n    \"aria-label\": \"account of current user\",\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, __jsx(AccountCircle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }))))));\n}","map":{"version":3,"sources":["/Users/imustafa/Projects/LoStudio/client/components/ApplicationMainBar.jsx"],"names":["useState","useEffect","fade","makeStyles","AppBar","Toolbar","Button","IconButton","Typography","InputBase","Badge","MenuItem","Menu","MenuIcon","SearchIcon","AccountCircle","MailIcon","NotificationsIcon","MoreIcon","Drawer","SideMenu","NotificationsActions","NotificationsMenu","Cookie","useRouter","deleteCookie","useStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","palette","common","white","marginLeft","width","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","padding","transition","transitions","create","sectionDesktop","sectionMobile","PrimarySearchAppBar","classes","router","notificationsCount","setNotificationsCount","React","notificationsMenuState","setNotificationsMenuState","openNotificationsMenu","event","currentTarget","closeNotificationsMenu","get","isAuthenticated","setIsAuthenticated","handleMenuClose","setAnchorEl","handleMobileMenuClose","logout","location","reload","getNotificationsCount","getMyNotificationsCount","$notificationsCount","count","console","log","push","root","input","top","Boolean"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Badge from \"@material-ui/core/Badge\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MailIcon from \"@material-ui/icons/Mail\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport SideMenu from \"./SideMenu\";\nimport NotificationsActions from \"../actions/notifications.actions\";\nimport NotificationsMenu from \"./notifications/NotificationsMenu\";\nimport Cookie from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { deleteCookie } from \"../actions/auth.actions\";\n\nconst useStyles = makeStyles((theme) => ({\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    display: \"none\",\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"block\",\n    },\n  },\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\",\n    },\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  inputRoot: {\n    color: \"inherit\",\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200,\n    },\n  },\n  sectionDesktop: {\n    display: \"none\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"flex\",\n    },\n  },\n  sectionMobile: {\n    display: \"flex\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\nexport default function PrimarySearchAppBar() {\n  const classes = useStyles();\n  const router = useRouter();\n  const [notificationsCount, setNotificationsCount] = useState(0);\n  const [notificationsMenuState, setNotificationsMenuState] = React.useState(\n    null\n  );\n  const openNotificationsMenu = (event) => {\n    setNotificationsMenuState(event.currentTarget);\n  };\n  const closeNotificationsMenu = () => {\n    setNotificationsMenuState(null);\n  };\n  const [isAuthenticated, setIsAuthenticated] = useState(!!Cookie.get(\"id\"));\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const logout = () => {\n    deleteCookie();\n    handleMenuClose();\n    location.reload();\n  };\n\n  useEffect(() => {\n    const getNotificationsCount = async () => {\n      try {\n        const $notificationsCount = await NotificationsActions.getMyNotificationsCount(\n          {}\n        );\n        setNotificationsCount($notificationsCount.count);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    getNotificationsCount();\n  }, []);\n\n  return (\n    <div className={classes.grow}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            LoStudio\n          </Typography>\n          {isAuthenticated && (\n            <div className={classes.grow}>\n              <Button\n                style={{ color: \"#FFF\" }}\n                onClick={() => {\n                  router.push(\"/dashboards\");\n                }}\n              >\n                Dashboards\n              </Button>\n              <Button\n                style={{ color: \"#FFF\" }}\n                onClick={() => {\n                  router.push(\"/webpages\");\n                }}\n              >\n                Web Pages\n              </Button>\n              <Button\n                style={{ color: \"#FFF\" }}\n                onClick={() => {\n                  router.push(\"/datasources\");\n                }}\n              >\n                Data Sources\n              </Button>\n              <Button\n                style={{ color: \"#FFF\" }}\n                onClick={() => {\n                  router.push(\"/widgets\");\n                }}\n              >\n                Widgets\n              </Button>\n            </div>\n          )}\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>\n            <InputBase\n              placeholder=\"Search…\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ \"aria-label\": \"search\" }}\n            />\n          </div>\n\n          <div className={classes.sectionDesktop}>\n            <IconButton color=\"inherit\" onClick={openNotificationsMenu}>\n              {notificationsCount ? (\n                <Badge badgeContent={notificationsCount} color=\"secondary\">\n                  <NotificationsIcon />\n                </Badge>\n              ) : (\n                <NotificationsIcon />\n              )}\n            </IconButton>\n            <NotificationsMenu\n              anchorEl={notificationsMenuState}\n              keepMounted\n              style={{ top: 50 }}\n              open={Boolean(notificationsMenuState)}\n              onClose={closeNotificationsMenu}\n            />\n\n            <IconButton\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-haspopup=\"true\"\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}