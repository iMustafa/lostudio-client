{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport Cookie from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport config from \"next/config\"; // import \"./css/grapes.min.css\";\n\nimport grapesjs from \"grapesjs\";\nimport gsWebpage from \"grapesjs-preset-webpage\";\nimport gsCustome from \"grapesjs-custom-code\";\nimport gsTap from \"grapesjs-tabs\";\nimport { TablePluginRef } from \"../../../components/grapes/table-widgets/html-table-widget/consts\";\nimport addTablePlugin from \"../../../components/grapes/table-widgets/html-table-widget\";\nimport { ChartPluginRef } from \"../../../components/grapes/chart-widgets/line-chart/consts\";\nimport addChartPlugin from \"../../../components/grapes/chart-widgets/line-chart\";\nconst {\n  API_URL\n} = config().publicRuntimeConfig;\n\nconst Page = () => {\n  const [pluginLoaded, setPluginLoaded] = React.useState(false);\n  const [editor, setEditor] = React.useState(null);\n  const router = useRouter();\n  const [id, setId] = React.useState(router.query.id);\n  React.useEffect(() => {\n    if (!pluginLoaded) {\n      addTablePlugin(id);\n      addChartPlugin();\n      setPluginLoaded(true);\n    } else if (!editor) {\n      const e = grapesjs.init({\n        color: \"white\",\n        height: \"100vh\",\n        width: \"auto\",\n        container: \"#g\",\n        fromElement: true,\n        plugins: [gsWebpage, gsCustome, gsTap, TablePluginRef, ChartPluginRef],\n        storageManager: {\n          type: \"remote\",\n          urlStore: `${API_URL}/Dashboards/${id}/grapes?access_token=${Cookie.get(\"id\")}`,\n          urlLoad: `${API_URL}/Dashboards/${id}/grapes?access_token=${Cookie.get(\"id\")}`,\n          autosave: false,\n          autoload: true,\n          contentTypeJson: true,\n          storeComponents: true,\n          allowScripts: 1,\n          storeStyles: true,\n          storeHtml: true,\n          storeCss: true\n        }\n      });\n    }\n  });\n  return __jsx(\"div\", {\n    id: \"g\",\n    className: \"h\"\n  });\n};\n\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}