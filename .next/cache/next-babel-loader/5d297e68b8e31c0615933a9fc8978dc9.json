{"ast":null,"code":"import axios from \"axios\";\nimport config from \"next/config\";\nimport Cookie from \"js-cookie\";\nconst {\n  API_URL\n} = config().publicRuntimeConfig;\nexport default class DashboardActions {\n  static async createDashboard({\n    Authorization,\n    dashboard\n  }) {\n    return axios.post(`${API_URL}/Dashboards`, dashboard, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async getDashboards({\n    Authorization,\n    query\n  }) {\n    return axios.get(`${API_URL}/Dashboards`, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      },\n      params: {\n        filter: {\n          where: {\n            isSub: false\n          }\n        }\n      }\n    }).then(res => res.data).catch(err => err);\n  }\n\n  static async linkSubDashboard({\n    id,\n    subDashboardId\n  }) {\n    return axios.post(`${API_URL}/Dashboards/${id}/subDashboards`, {\n      dashboardId: id,\n      subDashboardId\n    }, {\n      headers: {\n        Authorization: Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err);\n  }\n\n  static async unLinkSubDashboard({\n    id,\n    subDashboardId\n  }) {\n    return axios.delete(`${API_URL}/Dashboards/${id}/subDashboards/${subDashboardId}`, {\n      headers: {\n        Authorization: Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err);\n  }\n\n  static async getSubDashboards({\n    Authorization,\n    id\n  }) {\n    return axios.get(`${API_URL}/Dashboards/${id}/subDashboards`, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      },\n      params: {\n        filter: {\n          include: \"subDashboard\"\n        }\n      }\n    }).then(res => res.data).catch(err => err);\n  }\n\n  static async getDashboardById(id) {\n    return axios.get(`${API_URL}/Dashboards/${id}`, {\n      headers: {\n        Authorization: Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async updateDashboard(id, data) {\n    return axios.patch(`${API_URL}/Dashboards/${id}`, data).then(res => res.data).catch(err => err.response);\n  }\n\n  static async deleteDashboard(data) {\n    return axios.post(\"\", {}).then(res => res.data).catch(err => err.response);\n  }\n\n  static async getWidgetSettings({\n    Authorization,\n    id\n  }) {\n    return axios.get(`${API_URL}/Dashboards/${id}/widgetSettings`, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async getCollaborators({\n    Authorization,\n    id\n  }) {\n    return axios.get(`${API_URL}/Dashboards/${id}/collaborators`, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async getCollaboratorations({\n    Authorization\n  }) {\n    return axios.get(`${API_URL}/Dashboards/collaborations`, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async addCollaborator({\n    Authorization,\n    email,\n    id,\n    editor,\n    viewer\n  }) {\n    return axios.post(`${API_URL}/Dashboards/${id}/dashboardRoleMappings`, {\n      email,\n      editor,\n      viewer\n    }, {\n      headers: {\n        Authorization: Authorization || Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async addWidgetToDashboard(id, fk) {\n    return axios.put(`${API_URL}/Dashboards/${id}/widgetSettings/rel/${fk}`, {\n      dashboardId: id,\n      widgetSettingsId: fk\n    }, {\n      headers: {\n        Authorization: Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async createWidgetInDashboard(id, widgetData) {\n    return axios.post(`${API_URL}/Dashboards/${id}/widgetSettings`, widgetData, {\n      headers: {\n        Authorization: Cookie.get(\"id\")\n      }\n    }).then(res => res.data).catch(err => err.response);\n  }\n\n  static async removeWidgetFromDashboard(data) {\n    return axios.post(\"\", {}).then(res => res.data).catch(err => err.response);\n  }\n\n}","map":{"version":3,"sources":["/Users/imustafa/Projects/LoStudio/client/actions/dashboard.actions.ts"],"names":["axios","config","Cookie","API_URL","publicRuntimeConfig","DashboardActions","createDashboard","Authorization","dashboard","post","headers","get","then","res","data","catch","err","response","getDashboards","query","params","filter","where","isSub","linkSubDashboard","id","subDashboardId","dashboardId","unLinkSubDashboard","delete","getSubDashboards","include","getDashboardById","updateDashboard","patch","deleteDashboard","getWidgetSettings","getCollaborators","getCollaboratorations","addCollaborator","email","editor","viewer","addWidgetToDashboard","fk","put","widgetSettingsId","createWidgetInDashboard","widgetData","removeWidgetFromDashboard"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport config from \"next/config\";\nimport Cookie from \"js-cookie\";\nimport User from \"../types/users.types\";\nimport Dashboard from \"../types/dashboard.types\";\nimport Datasource from \"../types/datasource.types\";\nimport Widget from \"../types/widget.types\";\nimport WidgetSettings from \"../types/widgetSettings.type\";\n\nconst { API_URL } = config().publicRuntimeConfig;\n\nexport default class DashboardActions {\n  public static async createDashboard({\n    Authorization,\n    dashboard,\n  }: {\n    dashboard: Dashboard;\n    Authorization?: string;\n  }): Promise<Dashboard> {\n    return axios\n      .post(`${API_URL}/Dashboards`, dashboard, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async getDashboards({\n    Authorization,\n    query,\n  }: {\n    Authorization?: string;\n    query?: any;\n  }): Promise<Array<Dashboard>> {\n    return axios\n      .get(`${API_URL}/Dashboards`, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n        params: { filter: { where: { isSub: false } } },\n      })\n      .then((res) => res.data)\n      .catch((err) => err);\n  }\n\n  public static async linkSubDashboard({\n    id,\n    subDashboardId,\n  }: {\n    id: string;\n    subDashboardId: string;\n  }): Promise<any> {\n    return axios\n      .post(\n        `${API_URL}/Dashboards/${id}/subDashboards`,\n        { dashboardId: id, subDashboardId },\n        { headers: { Authorization: Cookie.get(\"id\") } }\n      )\n      .then((res) => res.data)\n      .catch((err) => err);\n  }\n\n  public static async unLinkSubDashboard({\n    id,\n    subDashboardId,\n  }: {\n    id: string;\n    subDashboardId: string;\n  }): Promise<any> {\n    return axios\n      .delete(`${API_URL}/Dashboards/${id}/subDashboards/${subDashboardId}`, {\n        headers: { Authorization: Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err);\n  }\n\n  public static async getSubDashboards({\n    Authorization,\n    id,\n  }: {\n    Authorization?: string;\n    id: string;\n  }): Promise<any> {\n    return axios\n      .get(`${API_URL}/Dashboards/${id}/subDashboards`, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n        params: { filter: { include: \"subDashboard\" } },\n      })\n      .then((res) => res.data)\n      .catch((err) => err);\n  }\n\n  public static async getDashboardById(id: string): Promise<Dashboard> {\n    return axios\n      .get(`${API_URL}/Dashboards/${id}`, {\n        headers: { Authorization: Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async updateDashboard(id: string, data): Promise<Dashboard> {\n    return axios\n      .patch(`${API_URL}/Dashboards/${id}`, data)\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async deleteDashboard(data: Datasource): Promise<Dashboard> {\n    return axios\n      .post(\"\", {})\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async getWidgetSettings({\n    Authorization,\n    id,\n  }: {\n    Authorization?: string;\n    id: string;\n  }): Promise<Array<WidgetSettings>> {\n    return axios\n      .get(`${API_URL}/Dashboards/${id}/widgetSettings`, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async getCollaborators({\n    Authorization,\n    id,\n  }: {\n    Authorization?: string;\n    id: string;\n  }): Promise<Array<User>> {\n    return axios\n      .get(`${API_URL}/Dashboards/${id}/collaborators`, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async getCollaboratorations({\n    Authorization,\n  }: {\n    Authorization?: string;\n  }): Promise<Array<Dashboard>> {\n    return axios\n      .get(`${API_URL}/Dashboards/collaborations`, {\n        headers: { Authorization: Authorization || Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async addCollaborator({\n    Authorization,\n    email,\n    id,\n    editor,\n    viewer,\n  }: {\n    Authorization?: string;\n    email: string;\n    id: string;\n    editor: boolean;\n    viewer: boolean;\n  }): Promise<any> {\n    return axios\n      .post(\n        `${API_URL}/Dashboards/${id}/dashboardRoleMappings`,\n        { email, editor, viewer },\n        { headers: { Authorization: Authorization || Cookie.get(\"id\") } }\n      )\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async addWidgetToDashboard(\n    id: string,\n    fk: string\n  ): Promise<Dashboard> {\n    return axios\n      .put(\n        `${API_URL}/Dashboards/${id}/widgetSettings/rel/${fk}`,\n        { dashboardId: id, widgetSettingsId: fk },\n        { headers: { Authorization: Cookie.get(\"id\") } }\n      )\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async createWidgetInDashboard(\n    id: string,\n    widgetData: any\n  ): Promise<Dashboard> {\n    return axios\n      .post(`${API_URL}/Dashboards/${id}/widgetSettings`, widgetData, {\n        headers: { Authorization: Cookie.get(\"id\") },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n\n  public static async removeWidgetFromDashboard(\n    data: Datasource\n  ): Promise<Dashboard> {\n    return axios\n      .post(\"\", {})\n      .then((res) => res.data)\n      .catch((err) => err.response);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}