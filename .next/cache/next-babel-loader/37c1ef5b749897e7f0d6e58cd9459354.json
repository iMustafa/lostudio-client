{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Badge from \"@material-ui/core/Badge\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport NotificationsActions from \"../actions/notifications.actions\";\nimport NotificationsMenu from \"./notifications/NotificationsMenu\";\nimport Cookie from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { deleteCookie } from \"../actions/auth.actions\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    grow: {\n      flexGrow: 1\n    },\n    menuButton: {\n      marginRight: theme.spacing(2)\n    },\n    title: _defineProperty({\n      display: \"none\"\n    }, theme.breakpoints.up(\"sm\"), {\n      display: \"block\"\n    }),\n    search: _defineProperty({\n      position: \"relative\",\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: \"100%\"\n    }, theme.breakpoints.up(\"sm\"), {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }),\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\"\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\"\n    }, theme.breakpoints.up(\"md\"), {\n      width: 200\n    }),\n    sectionDesktop: _defineProperty({\n      display: \"none\"\n    }, theme.breakpoints.up(\"md\"), {\n      display: \"flex\"\n    }),\n    sectionMobile: _defineProperty({\n      display: \"flex\"\n    }, theme.breakpoints.up(\"md\"), {\n      display: \"none\"\n    })\n  };\n});\nexport default function PrimarySearchAppBar() {\n  var classes = useStyles();\n  var router = useRouter();\n\n  var _useState = useState(0),\n      notificationsCount = _useState[0],\n      setNotificationsCount = _useState[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      notificationsMenuState = _React$useState2[0],\n      setNotificationsMenuState = _React$useState2[1];\n\n  var openNotificationsMenu = function openNotificationsMenu(event) {\n    setNotificationsMenuState(event.currentTarget);\n  };\n\n  var closeNotificationsMenu = function closeNotificationsMenu() {\n    setNotificationsMenuState(null);\n  };\n\n  var _useState2 = useState(!!Cookie.get(\"id\")),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var handleMenuClose = function handleMenuClose() {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  var logout = function logout() {\n    deleteCookie();\n    handleMenuClose();\n    location.reload();\n  };\n\n  useEffect(function () {\n    var getNotificationsCount = function getNotificationsCount() {\n      var $notificationsCount;\n      return _regeneratorRuntime.async(function getNotificationsCount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(NotificationsActions.getMyNotificationsCount({}));\n\n            case 3:\n              $notificationsCount = _context.sent;\n              setNotificationsCount($notificationsCount.count);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    getNotificationsCount();\n  }, []);\n  return __jsx(\"div\", {\n    className: classes.grow\n  }, __jsx(AppBar, {\n    position: \"static\"\n  }, __jsx(Toolbar, null, __jsx(Typography, {\n    className: classes.title,\n    variant: \"h6\",\n    noWrap: true\n  }, \"LoStudio\"), isAuthenticated && __jsx(\"div\", {\n    className: classes.grow\n  }, __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/dashboards\");\n    }\n  }, \"Dashboards\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/webpages\");\n    }\n  }, \"Web Pages\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/datasources\");\n    }\n  }, \"Data Sources\"), __jsx(Button, {\n    style: {\n      color: \"#FFF\"\n    },\n    onClick: function onClick() {\n      router.push(\"/widgets\");\n    }\n  }, \"Widgets\")), __jsx(\"div\", {\n    className: classes.search\n  }, __jsx(\"div\", {\n    className: classes.searchIcon\n  }, __jsx(SearchIcon, null)), __jsx(InputBase, {\n    placeholder: \"Search\\u2026\",\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    },\n    inputProps: {\n      \"aria-label\": \"search\"\n    }\n  })), __jsx(\"div\", {\n    className: classes.sectionDesktop\n  }, __jsx(IconButton, {\n    color: \"inherit\",\n    onClick: openNotificationsMenu\n  }, notificationsCount ? __jsx(Badge, {\n    badgeContent: notificationsCount,\n    color: \"secondary\"\n  }, __jsx(NotificationsIcon, null)) : __jsx(NotificationsIcon, null)), __jsx(NotificationsMenu, {\n    anchorEl: notificationsMenuState,\n    keepMounted: true,\n    style: {\n      top: 50\n    },\n    open: Boolean(notificationsMenuState),\n    onClose: closeNotificationsMenu\n  }), __jsx(IconButton, {\n    edge: \"end\",\n    \"aria-label\": \"account of current user\",\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\"\n  }, __jsx(AccountCircle, null))))));\n}","map":null,"metadata":{},"sourceType":"module"}