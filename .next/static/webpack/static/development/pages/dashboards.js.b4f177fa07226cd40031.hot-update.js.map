{"version":3,"file":"static/webpack/static/development/pages/dashboards.js.b4f177fa07226cd40031.hot-update.js","sources":["webpack:///./actions/datasource.actions.ts","webpack:///./components/dashboards/create-dashboard.jsx"],"sourcesContent":["import axios from 'axios'\nimport config from 'next/config'\nimport Cookie from 'js-cookie'\nimport Datasource from '../types/datasource.types'\n\nconst { API_URL } = config().publicRuntimeConfig\n\nexport default class DatasourceActions {\n\n  public static async createDatasource(data: Datasource): Promise<Datasource> {\n    return axios\n      .post(`${API_URL}/DataSources`, data, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err)\n  }\n\n  public static async updateDatasource(id: string, data: Datasource): Promise<Datasource> {\n    return axios\n      .patch(`${API_URL}/DataSources/${id}`, data, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDatasources({ Authorization, query }: { Authorization?: string, query?: any }): Promise<Array<Datasource>> {\n    return axios\n      .get(`${API_URL}/DataSources`, { headers: { Authorization: Authorization || Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err)\n  }\n\n  public static async getUserDatasources(id: string, query: any): Promise<Array<Datasource>> {\n    return axios\n      .get(`${API_URL}/users/${id}/dataSrouces`, { headers: { Authorization: Cookie.get('id') }, params: { ...query } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDatasourceById(id: string): Promise<Datasource> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async removeDatasource(id: string): Promise<Datasource> {\n    return axios\n      .delete(`${API_URL}/DataSources/${id}`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getDocList(id: string): Promise<any> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}/doc-list`, { headers: { Authorization: Cookie.get('id') } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async getFieldList(id: string, docId: string): Promise<any> {\n    return axios\n      .get(`${API_URL}/DataSources/${id}/field-list`, { headers: { Authorization: Cookie.get('id') }, params: { docId } })\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n  public static async queryDatasource(query: string): Promise<any> {\n    return axios\n      .post('', {})\n      .then(res => res.data)\n      .catch(err => err.response)\n  }\n\n}\n\n","import { useState } from 'react'\nimport DatasourceActions from '../../actions/datasource.actions'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Card from '@material-ui/core/Card'\nimport Stepper from '@material-ui/core/Stepper'\nimport Step from '@material-ui/core/Step'\nimport StepLabel from '@material-ui/core/StepLabel'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControl from '@material-ui/core/FormControl'\nimport TextField from '@material-ui/core/TextField'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: '25px'\n  },\n  cardBody: {\n    padding: '10px'\n  },\n  cardTitle: {\n    fontSize: '12px',\n    backgroundColor: '#3F51B5',\n    padding: '3px 3px 3px 6px',\n    color: '#FFF',\n    fontFamily: [\"Roboto\", \"Helvetica\", \"Arial\", \"sans-serif\"]\n  },\n  actionButtons: {\n    display: 'flex',\n    justifyContent: 'center'\n  }\n}))\n\nconst getSteps = () => ['Dashboard Settings', 'Datasource Settings', 'Add Collaborators', 'Confirmation']\n\nconst CreateDashboard = () => {\n  const classes = useStyles()\n  const [activeStep, setActiveStep] = useState(0)\n  const [datasources, setDatasources] = useState([])\n  const [skipped, setSkipped] = useState(new Set())\n  const steps = getSteps()\n\n  useEffect(() => {\n    const getDataSources = async () => {\n      try {\n        const data = await DatasourceActions.getDatasources()\n        setDatasources(data)\n      } catch(e) {\n        console.log(e)\n      }\n    }\n    getDataSources()\n  }, [])\n  \n  const getStepContent = (step) => {\n    switch (step) {\n      case 0:\n        return (\n          <FormGroup row>\n            <TextField type='text' name='title'/>\n            <TextField type='text' name='description'/>\n          </FormGroup>\n        );\n      case 1:\n        return (\n          <FormGroup row>\n            <InputLabel id='datasource-label'>Default DataSource</InputLabel>\n            <Select labelId='datasource-label'>\n              {datasources.map(datasource => (\n                <MenuItem value={datasource._id}>{datasource.title}</MenuItem>\n              ))}\n            </Select>\n          </FormGroup>\n        );\n      case 2:\n        return 'Allow people to help you build your dashboard!';\n      case 3:\n        return 'Confirm your data';\n      default:\n        return 'Unknown step';\n    }\n  }\n  \n  const isStepOptional = step => step === 2\n  const isStepSkipped = step => skipped.has(step)\n  const handleNext = () => {\n    let newSkipped = skipped\n    if (isStepSkipped(activeStep)) {\n      newSkipped = new Set(newSkipped.values())\n      newSkipped.delete(activeStep)\n    }\n    setActiveStep((prevActiveStep) => prevActiveStep + 1)\n    setSkipped(newSkipped)\n  }\n  const handleBack = () => { setActiveStep((prevActiveStep) => prevActiveStep - 1) }\n  const handleReset = () => { setActiveStep(0) }\n\n\n  return (\n    <Card className={classes.root}>\n      <div className={classes.cardTitle}>Create new dashboard</div>\n      <div className={classes.cardBody}>\n        <div className={classes.root}>\n          <Stepper activeStep={activeStep}>\n            {steps.map((label, index) => {\n              const stepProps = {};\n              const labelProps = {};\n              if (isStepOptional(index)) {\n                labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n              }\n              if (isStepSkipped(index)) {\n                stepProps.completed = false;\n              }\n              return (\n                <Step key={label} {...stepProps}>\n                  <StepLabel {...labelProps}>{label}</StepLabel>\n                </Step>\n              );\n            })}\n          </Stepper>\n          <div>\n            {\n              activeStep === steps.length ?\n                (\n                  <div>\n                    <Typography className={classes.instructions}>\n                      All steps completed - you&apos;re finished\n                    </Typography>\n                    <div className={classes.actionButtons}>\n                      <Button onClick={handleReset} className={classes.button}>\n                        Reset\n                     </Button>\n                    </div>\n                  </div>\n                ) : (\n                  <div>\n                    <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\n                    <div className={classes.actionButtons}>\n                      <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                        Back\n                      </Button>\n\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleNext}\n                        className={classes.button}\n                      >\n                        {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                      </Button>\n                    </div>\n                  </div>\n                )\n            }\n          </div>\n        </div>\n      </div>\n    </Card>\n  )\n}\n\nexport default CreateDashboard"],"mappings":"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","sourceRoot":""}